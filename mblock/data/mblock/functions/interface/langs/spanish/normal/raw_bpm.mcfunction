tag @s add _bpm_player
execute as @e[tag=music_player,sort=nearest,limit=1] if entity @s[tag=direct_bpm] run tag @e[tag=_bpm_player] add enabled_dbpm
execute as @e[tag=music_player,sort=nearest,limit=1] if entity @s[tag=disable_double] run tag @e[tag=_bpm_player] add enabled_dd
execute as @e[tag=music_player,sort=nearest,limit=1] if entity @s[tag=compress_bpm] run tag @e[tag=_bpm_player] add compress_bpm

tellraw @s[tag=!enabled_dbpm] ["", {"text": "[", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/use_raw_bpm"}}, {"text": "◆", "color": "red", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/use_raw_bpm"}}, {"text": "]", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/use_raw_bpm"}}, {"text": " "}, {"text": "No Procesar BPM", "color": "gray", "hoverEvent": {"action": "show_text", "value": "Esto utilizará directamente el valor BPM especificado y desactivará la mayoría de los preprocesamientos.\n\nLa escala esperada para el BPM es 10000, por ejemplo 2 bloques por tick * 10000 = 20000."}}]
tellraw @s[tag=enabled_dbpm] ["", {"text": "[", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/not_use_raw_bpm"}}, {"text": "◆", "color": "green", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/not_use_raw_bpm"}}, {"text": "]", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/not_use_raw_bpm"}}, {"text": " "}, {"text": "No Procesar BPM", "color": "gray", "hoverEvent": {"action": "show_text", "value": "Esto utilizará directamente el valor BPM especificado y desactivará la mayoría de los preprocesamientos.\n\nLa escala esperada para el BPM es 10000, por ejemplo 2 bloques por tick * 10000 = 20000."}}]

tellraw @s[tag=enabled_dbpm,tag=!enabled_dd] ["", {"text": "[", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/disable_double_bpm"}}, {"text": "◆", "color": "green", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/disable_double_bpm"}}, {"text": "]", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/disable_double_bpm"}}, {"text": " "}, {"text": "Multiplicar BPM", "color": "gray", "hoverEvent": {"action": "show_text", "value": "Multiplica el BPM por dos y escala por 1000.\n\nDeshabilite esta opción para eliminar todo el preprocesamiento al BPM."}}]
tellraw @s[tag=enabled_dbpm,tag=enabled_dd] ["", {"text": "[", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/double_bpm"}}, {"text": "◆", "color": "red", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/double_bpm"}}, {"text": "]", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/double_bpm"}}, {"text": " "}, {"text": "Multiplicar BPM", "color": "gray", "hoverEvent": {"action": "show_text", "value": "Multiplica el BPM por dos y escala por 1000.\n\nDeshabilite esta opción para eliminar todo el preprocesamiento al BPM."}}]

tellraw @s[tag=!enabled_dbpm,tag=!compress_bpm] ["", {"text": "[", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/compress_bpm"}}, {"text": "◆", "color": "red", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/compress_bpm"}}, {"text": "]", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/compress_bpm"}}, {"text": " "}, {"text": "Compress BPM", "color": "gray", "hoverEvent": {"action": "show_text", "value": "Calcula el BPM asumiendo que un bloque consiste en 4 ticks de juego.\n\nEsto puede ser útil para hacer metrónomos, ya que sólo utiliza un bloque por cada sonido de clic (Cómo escalar: BPM * 4 = 360 BPM)."}}]
tellraw @s[tag=!enabled_dbpm,tag=compress_bpm] ["", {"text": "[", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/not_compress_bpm"}}, {"text": "◆", "color": "green", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/not_compress_bpm"}}, {"text": "]", "clickEvent": {"action": "run_command","value": "/function mblock:interface/commands/not_compress_bpm"}}, {"text": " "}, {"text": "Compress BPM", "color": "gray", "hoverEvent": {"action": "show_text", "value": "Calcula el BPM asumiendo que un bloque consiste en 4 ticks de juego.\n\nEsto puede ser útil para hacer metrónomos, ya que sólo utiliza un bloque por cada sonido de clic (Cómo escalar: BPM * 4 = 360 BPM)."}}]
tellraw @s[tag=enabled_dbpm] ["", {"text": "["}, {"text": "◆", "color": "dark_gray","hoverEvent": {"action": "show_text","value": "Incompatible with Raw BPM."}}, {"text": "]"}, {"text": " "}, {"text": "Compress BPM", "color": "gray", "hoverEvent": {"action": "show_text", "value": "Calcula el BPM asumiendo que un bloque consiste en 4 ticks de juego.\n\nEsto puede ser útil para hacer metrónomos, ya que sólo utiliza un bloque por cada sonido de clic (Cómo escalar: BPM * 4 = 360 BPM)."}}]

tag @s remove _bpm_player
tag @s remove enabled_dbpm
tag @s remove enabled_dd
tag @s remove compress_bpm
