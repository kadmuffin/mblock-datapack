/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{337:function(t,e,n){var o=n(14),r="["+n(338)+"]",c=RegExp("^"+r+r+"*"),l=RegExp(r+r+"*$"),f=function(t){return function(e){var n=String(o(e));return 1&t&&(n=n.replace(c,"")),2&t&&(n=n.replace(l,"")),n}};t.exports={start:f(1),end:f(2),trim:f(3)}},338:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},342:function(t,e,n){"use strict";var o=n(8),r=n(3),c=n(103),l=n(15),f=n(10),d=n(34),m=n(215),h=n(69),v=n(5),y=n(104),k=n(70).f,x=n(25).f,_=n(11).f,w=n(337).trim,N=r.Number,S=N.prototype,I="Number"==d(y(S)),A=function(t){var e,n,o,r,c,l,f,code,d=h(t,!1);if("string"==typeof d&&d.length>2)if(43===(e=(d=w(d)).charCodeAt(0))||45===e){if(88===(n=d.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(d.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+d}for(l=(c=d.slice(2)).length,f=0;f<l;f++)if((code=c.charCodeAt(f))<48||code>r)return NaN;return parseInt(c,o)}return+d};if(c("Number",!N(" 0o1")||!N("0b1")||N("+0x1"))){for(var C,E=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof E&&(I?v((function(){S.valueOf.call(n)})):"Number"!=d(n))?m(new N(A(e)),n,E):A(e)},D=o?k(N):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),L=0;D.length>L;L++)f(N,C=D[L])&&!f(E,C)&&_(E,C,x(N,C));E.prototype=S,S.constructor=E,l(r,"Number",E)}},352:function(t,e,n){(function(e){t.exports=function(t,n){if("undefined"==typeof Blob||!(t instanceof Blob))throw new Error("first argument must be a Blob");if("function"!=typeof n)throw new Error("second argument must be a function");const o=new FileReader;o.addEventListener("loadend",(function t(r){o.removeEventListener("loadend",t,!1),r.error?n(r.error):n(null,e.from(o.result))}),!1),o.readAsArrayBuffer(t)}}).call(this,n(327).Buffer)},353:function(t,e,n){var content=n(406);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(62).default)("1afa01a0",content,!0,{sourceMap:!1})},366:function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},367:function(t,e,n){"use strict";n(2)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},404:function(t,e,n){"use strict";var o=n(2),r=n(35).findIndex,c=n(156),l=n(20),f=!0,d=l("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){f=!1})),o({target:"Array",proto:!0,forced:f||!d},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),c("findIndex")},405:function(t,e,n){"use strict";var o=n(353);n.n(o).a},406:function(t,e,n){(e=n(61)(!1)).push([t.i,".nbs-content{padding-left:14px;padding-right:14px}.more-settings{font-size:20px;font-weight:400;margin-top:20px;cursor:pointer}.el-button-group__append{background-color:#0b76bd}.form-content{margin-bottom:6px}.form-content p{font-weight:550;margin-bottom:8px}.blue-color{color:#1f4de4}.red-color{color:#d44b4b}.red-color-disabled{color:rgba(212,75,75,.644)}.nbs-more{margin-bottom:5px;-webkit-user-select:none}.remove-card{margin-left:100%}.add-area,.remove-card{cursor:pointer;-webkit-user-select:none}.add-area{margin-left:8px;margin-right:8px}.disabled-icon{color:rgba(0,0,0,60%)}.card-id{font-size:10px;font-weight:700;margin-bottom:20px;color:rgba(46,46,46,.95)}.top-spacing{margin-top:15px}",""]),t.exports=e},499:function(t,e,n){"use strict";n.r(e);n(47),n(63),n(64),n(152),n(65),n(71),n(349),n(45),n(19),n(216),n(66),n(46),n(67),n(153),n(217),n(68);var o=n(365),r=n(352),c=n.n(r);n(404),n(367);function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}var m=function(){function t(e){l(this,t),this.blocks=[[]],this.instrument=e,this.tick=[-1]}return d(t,[{key:"appendNote",value:function(t,e,n){this.fixTickIndex(n),this.appendSpacing(e,n),t.key>8&&t.key<82?this.blocks[n].push({tone:t.key-33,sound:t.instrument}):this.blocks[n].push({tone:-1})}},{key:"fixTickIndex",value:function(t){if(t>=this.blocks.length)for(var i=0;i<t;i+=1)this.blocks.push([]),this.tick.push(-1)}},{key:"appendSpacing",value:function(t,e){var n=t-this.tick[e]-1;n>0&&this.blocks[e].push({air:n}),this.tick[e]=t}}]),t}();m.prototype.toJSON=function(){return this.blocks};var h=m,v=function(){function t(){l(this,t),this.data=[]}return d(t,[{key:"parseNotes",value:function(e,n){for(var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=0;i<n.length;i+=1){var r=t.findPos(this.data,n[i],o);r>=0?this.appendNote(r,n[i],e,o?0:i):(this.data.push(new h(o?n[i].layer:n[i].instrument)),this.appendNote(this.data.length-1,n[i],e))}}},{key:"alignData",value:function(){var t=Math.round(this.data.length/2);return t%2==0&&(t+=1),t}},{key:"appendNote",value:function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.data[t].appendNote(e,n,o)}}],[{key:"findPos",value:function(data,t,e){return e?data.findIndex((function(e){return e.instrument===t.layer})):data.findIndex((function(e){return e.instrument===t.instrument}))}},{key:"findDataIndex",value:function(data,t){return data.findIndex((function(e){return e.instrument===t}))}}]),t}();v.prototype.toJSON=function(){return this.data};var y=v,k=(n(44),n(6)),x=n(336),_=n(335),w=n.n(_);function N(){return(N=Object(k.a)(regeneratorRuntime.mark((function t(e,n){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.generateAsync({type:"blob"});case 2:data=t.sent,Object(x.saveAs)(data,n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t,e){var n="",o=new w.a;o.folder("data/minecraft/tags/functions"),o.folder("data/".concat(t,"/functions")),o.folder("data/".concat(t,"/functions/songs"));for(var i=0;i<e.length;i+=1)o.file(["data/".concat(t,"/functions/songs/").concat(e[i].name,".mcfunction")],e[i].data.replace("{[name]}",e[i].name)),n=n.concat('tellraw @a ["",{"text":" - ", "color": "green"},{"text":"'.concat(e[i].name,'","color":"gray","clickEvent":{"action":"run_command","value":"/function ').concat(t,":songs/").concat(e[i].name,'"}}]\n'));o.file(["data/".concat(t,"/functions/list.mcfunction")],n),o.file(["data/".concat(t,"/functions/init.mcfunction")],'tellraw @a ["",{"text":"[MusicBlocks] ","color":"dark_gray"},{"text":"Songs Loaded: ","color":"green"},{"text":"'.concat(t,'.","color":"aqua","italics":"true","bold":"true","hoverEvent":{"action":"show_text","value":"Click to List Songs!"},"clickEvent":{"action":"run_command","value":"/function ').concat(t,':list"}}]')),o.file(["data/minecraft/tags/functions/load.json"],'{"values": ["'.concat(t,':init"]}')),o.file(["pack.mcmeta"],JSON.stringify({pack:{pack_format:6,description:"§7MusicBlocks: §aCustom Songs (".concat(t,").")}})),function(t,e){N.apply(this,arguments)}(o,"mblock_".concat(t,".zip"))}function I(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,r=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw r}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var C={data:function(){return{file:[],packName:"songs",songs:[]}},methods:{processFile:function(t){var e=this;this.$confirm("This will parse this file (Assuming Open Noteblock Studio file). Continue?","Warning",{confirmButtonText:"Parse File",cancelButtonText:"Cancel",type:"warning"}).then((function(){var n=t.name.split(".");"nbs"===n[n.length-1]?e.load_song(t):e.$message({type:"error",message:"Failed, couldn't read NBS file."}),e.$refs.upload.clearFiles()})).catch((function(){e.$message({type:"info",message:"Parsing Cancelled!"}),e.$refs.upload.clearFiles()}))},handleDelete:function(t){this.songs.splice(t,1)},formatDownload:function(){return"".concat(this.songs.length," to process.")},formatLoad:function(){return this.songs.length>7?"Limit Reached!":"".concat(8-this.songs.length," Songs Before Limit")},formatDelete:function(){return this.songs.length>1?"Delete Card":"Delete Disabled"},download:function(t){t.preventDefault(),S(this.packName,this.songs),this.$message({message:"The download should start in a few seconds.",type:"success"})},load_song:function(t){var e=this;c()(t,(function(n,r){if(n)throw n;o.load(r).then((function(n){var o=e.parse_notes(n,!0);e.songs.push({id:e.songs.length,name:t.name.toLowerCase().replace("-","_").replace(new RegExp("[^a-z0-9_.]+","g"),""),data:o.parsed,length:o.length}),e.$message({type:"success",message:"Song Added!"})})).catch((function(){e.$message({type:"error",message:"Failed to load NBS File!"})}))}))},parse_notes:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=0,data=new y,r=I(t.chords());try{for(r.s();!(e=r.n()).done;){var c=e.value,l=c.tick,f=c.notes;!n&&f.length>o&&(o=f.length),data.parseNotes(l,f,n)}}catch(t){r.e(t)}finally{r.f()}var d=data.alignData();return{parsed:'give @s minecraft:enchanted_book{display:{Name:"\\"§b{[name]}\\"",Lore:["\\"§8--------\\"","\\"§7Song BPM:\\"","\\"§9'.concat(20*t.header.tempo," §64/").concat(t.header.time_signature,'\\"","\\"§7Song Size:\\"","\\"§9x: §a').concat(d,", §9y: §a").concat(o,", §9z: §a").concat(t.header.song_length,';\\"","\\"§7Imported: §9True\\""]}, contains_song:1b, song:{xsize:').concat(d,",ysize:").concat(o,",zsize:").concat(t.header.song_length,",bpm:").concat(20*t.header.tempo,",signature:[4, ").concat(t.header.time_signature,"],nbs_bpm:1b}, data:{events:[],notes:").concat(JSON.stringify(data),"}}"),length:t.header.song_length}}}},E=(n(405),n(26)),component=Object(E.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:t.download}},[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"scroll"},[n("transition-group",{attrs:{name:"fade",tag:"ul",mode:"out-in"}},t._l(t.songs,(function(e,o){return n("el-card",{key:e.id,staticClass:"fade-item"},[n("div",{staticClass:"nbs-content"},[n("el-row",[n("el-col",{attrs:{span:12}},[n("p",{staticClass:"card-id"},[t._v("#"+t._s(o+1))])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-tooltip",{staticClass:"remove-card",attrs:{placement:"bottom",content:t.formatDelete()}},[n("i",{staticClass:"el-icon-delete-solid red-color",on:{click:function(e){return t.handleDelete(o)}}})])],1)],1),t._v(" "),n("div",[n("div",{staticClass:"form-content"},[n("p",[t._v("Song Name")]),t._v(" "),n("el-input",{attrs:{pattern:"[a-z0-9_\\-\\.]+",type:"text",required:""},model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"o.name"}})],1),t._v(" "),n("div",{staticClass:"form-content"},[n("p",[t._v("Song Length")])]),t._v(" "),n("el-input-number",{staticStyle:{width:"100%"},attrs:{value:e.length,disabled:""}})],1)],1)])})),1)],1)]),t._v(" "),n("el-col",{staticStyle:{"padding-left":"18px"},attrs:{span:12}},[n("el-card",[n("div",{staticClass:"form-content"},[n("el-input",{attrs:{pattern:"[a-z0-9_]+",placeholder:"Datapack Name",required:""},model:{value:t.packName,callback:function(e){t.packName=e},expression:"packName"}})],1),t._v(" "),n("el-row",{staticClass:"top-spacing",attrs:{type:"flex",justify:"center"}},[n("el-tooltip",{attrs:{content:t.formatDownload(),"popper-class":"primary"}},[n("el-button",{attrs:{disabled:t.songs.length<1,type:"success","native-type":"submit"}},[t._v("\n              Download\n            ")])],1)],1)],1),t._v(" "),n("el-card",[n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-tooltip",{attrs:{content:t.formatLoad()}},[n("el-upload",{ref:"upload",attrs:{drag:"",action:"",disabled:t.songs.length>7,limit:1,"show-file-list":!1,multiple:!1,"file-list":t.file,"before-upload":t.processFile}},[n("i",{staticClass:"el-icon-upload"}),t._v(" "),n("div",{staticClass:"el-upload__text"},[t._v("\n                Drop Noteblock Studio file here or "),n("em",[t._v("click here.")])])])],1)],1)],1),t._v(" "),n("el-card",[n("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("Home")]),t._v(" "),n("el-breadcrumb-item",[t._v("Tools")]),t._v(" "),n("el-breadcrumb-item",[t._v("NBS to Datapack")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);